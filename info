Flujo de Funcionamiento
ğŸ”„ Flujo de Registro
Usuario envÃ­a datos de registro a /register
Sistema genera token de verificaciÃ³n por email
Usuario hace clic en enlace del email
Sistema verifica token con /verify-email/:token
Correo queda verificado y puede hacer login
ğŸ”„ Flujo de Login EstÃ¡ndar
Usuario envÃ­a credenciales a /login
Sistema valida email verificado y contraseÃ±a
Si no tiene 2FA: retorna JWT token y datos de usuario
Si tiene 2FA: retorna indicaciÃ³n de requerir 2FA
ğŸ”„ Flujo de Login con 2FA
Usuario intenta login estÃ¡ndar â†’ sistema indica que requiere 2FA
Usuario obtiene cÃ³digo de app autenticadora
Usuario envÃ­a credenciales + cÃ³digo 2FA a /login-2fa
Sistema valida todo y retorna JWT token
ğŸ”„ Flujo de ConfiguraciÃ³n 2FA
Usuario autenticado solicita generar QR en /2fa/generate/:id
Usuario escanea QR con app autenticadora
Usuario envÃ­a cÃ³digo de prueba a /2fa/enable/:id
Sistema verifica cÃ³digo y activa 2FA
Para futuros logins deberÃ¡ usar /login-2fa
Seguridad y Guards
ğŸ›¡ï¸ AuthGuard
Valida JWT token en header Authorization: Bearer <token>
Extrae informaciÃ³n del usuario del token
Protege endpoints marcados con @UseGuards(AuthGuard)